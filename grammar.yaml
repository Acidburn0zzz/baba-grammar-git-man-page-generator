baba: '1.0'
transform:
  function:
    uppercase: 'return $in.toUpperCase()'
    lowercase': 'return $in.toLowerCase()'
    titlecase: 'return $in.replace(/\w\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1))'
    uppercase-first: 'return $in.charAt(0).toUpperCase() + $in.substr(1)'
    constantify: 'return $in.toUpperCase().replace(/[^a-z0-9]/gi, "_")'
    prepend-an: 'if ($in[0].match(/[aeiou]/)) { return "an " + $in } return "a " + $in'
    verb:
      tense:
        'past': >
          return $helpers.re($in, [
            // exceptions
            [/^((re)?set)$/i, '$1'],
            [/^(send)$/i, 'sent'],
            [/^(show)$/i, 'shown'],
            [/^(checkout)$/i, 'checked out'],
            [/^(catalog)$/i, 'cataloged'],

            [/(.*[aeiouy]{2}[bcdfghjklmnpqrstvwxz])$/i, '$1ed'],
            [/(.*c)$/i, '$1ked'],
            [/(.*)mit$/i, '$1mitted'],
            [/(.*)fer$/i, '$1ferred'],
            [/(.{1,3}[aeiou])([bdfglmnprstz])$/i, '$1$2$2ed'],
            [/(.*[aeiouy]l)$/i, '$1led'],
            [/(.*?[eyo]e)$/i, '$1d'],
            [/(.*)y$/i, '$1ied'],
            [/(.*?)e?$/i, '$1ed'],
          ])
        'past-participle': >
          return $helpers.re($in, [
            [/(.*?)[aeiouy]?$/i, '$1en'],
          ])
        'present': >
          return $helpers.re($in, [
            // exceptions
            [/^(checkout)$/i, 'checks out'],

            [/(.*[^aeiou])y$/i, '$1ies'],
            [/(.*([sc]h|s|ex))$/i, '$1es'],
            [/(.*)$/i, '$1s'],
            // general rules
            //[/(.*)ex$/i, '$1exes'],
            //[/(.*)([^aeo])y$/i, '$1$2ies'],
            //[/(.*)([sc]h|s)$/i, '$1$2es'],
            //[/(.*)/i, '$1s'],
          ])
        'present-participle': >
          return $helpers.re($in, [
            // exceptions
            [/^(checkout)$/i, 'checking out'],
            [/^(catalog)$/i, 'cataloging'],

            [/(.*[aeiouy]{2}[bcdfghjklmnpqrstvwxz])$/i, '$1ing'],
            [/(.*c)$/i, '$1king'],
            [/(.*)mit$/i, '$1mitting'],
            [/(.*)fer$/i, '$1ferring'],
            [/(.*)ize$/i, '$1ization'],
            [/(.{1,3}[aeiou])([bdfglmnprstz])$/i, '$1$2$2ing'],
            [/(.*[aeiouy]l)$/i, '$1ling'],
            [/(.*?[eyo]e)$/i, '$1ing'],
            [/(.*?)e?$/i, '$1ing']

            // general rules
            //[/(.*[^aeiouy][aeiouy])([bcdfglmpstvz])$/i, '$1$2$2ing'],
            //[/(.*)e$/i, '$1ing'],
            //[/(.*)$/i, '$1ing'],
          ])
      '-ize': >
        return $helpers.re($in, [
          // general rules
          [/(.*)[aeiouy]$/i, '$1ize'],
          [/(.*)$/i, '$1ize'],
        ])

    'noun':
      'abstract': >
        return $helpers.re($in, [
          [/(.*)eme$/i, '$1emacy'],
          [/(.*)([ia])ble$/i, '$1$2bility'],
          [/(.*)([tv])e$/i, '$1$2eness'],
          [/(.*[aeiouy]?)$/i, '$1ity'],
        ])
      'plural': >
        return $helpers.re($in, [
          // exceptions
          [/(.*)man$/i, '$1men'],
          [/(womyn)$/i, 'wymyn'],
          [/(person)$/i, 'people'],

          // general rules
          [/(.*)ife$/i, '$1ives'],
          [/(.*)ex$/i, '$1ices'],
          [/(.*)([^ou])y$/i, '$1$2ies'],
          [/(.*)([sc]h|s)$/i, '$1$2es'],
          //[/(.*((t?c|s)h|[sx]))$/i, '$1$2es'],
          [/(.*)/i, '$1s'],
        ])

    'adjective':
      '-ity': >
        return $helpers.re($in, [
          // general rules
          [/(.*)eme$/i, '$1emacy'],
          [/(.*)([ia])ble$/i, '$1$2bility'],
          [/(.*)([tv])e$/i, '$1$2eness'],
          [/(.*)[aeiouy]$/i, '$1ity'],
          [/(.*)$/i, '$1ity'],
        ])
      '-ly': >
        return $helpers.re($in, [
          // general rules
          [/(.*)ic$/i, '$1ically'],
          [/(.*)[aeiouy]$/i, '$1y'],
          [/(.*)$/i, '$1ly'],
        ])
expose:
  sentence: Single sentence
  paragraph: Paragraph
  command-action: Command action
  command-description: Command description
variable:
  command-verb: '{verb.common}'
  command-noun: '{noun.git}'
rule:
  sentence:
    - '{condition uppercase-first}, {statement}.'
    - '{condition uppercase-first}, {statement}, {conclusion}.'
    - '{statement uppercase-first}.'
    - '{statement uppercase-first}, {conclusion}.'

  paragraph:
    - '{sentence} {sentence}'
    - '{sentence} {sentence} {sentence}'
    - '{sentence} {sentence} {sentence} {sentence}'

  verb:
    git: [add, allot, annotate, apply, archive, bisect, blame, branch, bundle, catalog, check, checkout, cherry-pick, clean, clone, commit, configure, count, describe, diff, export, fail, fast-export, fast-import, fetch, filter-branch, format-patch, forward-port, fsck, grep, import, index, initialize, log, merge, name, note, pack, parse, patch, perform, prevent, prune, pull, push, quiltimport, reapply, rebase, reflog, relink, remote, remove, repack, request, reset, reset, return, rev-list, rev-parse, revert, save, send, set, show, specify, stage, stash, strip]
    common: [abandon, abduct, abolish, abuse, accuse, acquire, activate, adapt, add, address, adjust, advise, aid, alert, allocate, answer, apprehend, approach, arbitrate, arrange, arrest, assault, assemble, assess, assign, assist, attack, attract, audit, augment, authenticate, authorize, automate, avoid, award, balance, bang, beat, berate, bite, blast, blend, block, blow, book, boost, brace, brief, brighten, buck, bump, bury, bushwhack, calculate, call, calm, cancel, capitalize, catch, centralize, certify, challenge, change, channel, charge, chart, chase, check, choke, circumscribe, circumvent, clap, clarify, classify, climb, clip, clutch, coach, collaborate, collapse, collate, collect, collide, combine, command, commandeer, compile, complete, compose, compute, conceive, condense, configure, conserve, consolidate, construct, consult, contract, control, convert, coordinate, correlate, counsel, count, cram, crash, create, cripple, critique, cultivate, cure, customize, cut, decorate, decrease, define, delegate, delete, delineate, deliver, demonstrate, derive, describe, design, detail, detect, determine, develop, devise, diagnose, dictate, direct, discard, discover, dispatch, display, dissect, distinguish, distribute, ditch, divert, dodge, dominate, dope, double, douse, draft, drag, drain, dramatize, drape, draw, dress, drill, drink, drop, drown, drug, dry, dunk, earn, edge, edit, educate, eject, elect, elevate, eliminate, employ, enable, enact, encourage, endure, engage, engineer, enjoin, ensnare, ensure, enter, equip, escalate, escape, establish, evacuate, evade, evaluate, evict, examine, execute, exhale, exhibit, exit, expand, expedite, expel, explode, experience, experiment, explain, explore, expose, extend, extirpate, extract, extricate, fade, fake, fashion, fear, feed, feel, fight, file, fill, find, finger, finish, fix, flag, flap, flash, flatten, flaunt, flay, flick, fling, flip, flog, flounder, flout, flush, focus, fondle, force, forecast, forge, formalize, form, formulate, fornicate, foster, found, fumble, fund, furnish, gain, gather, generate, gesture, get, give, gouge, govern, graduate, grab, grasp, greet, grind, grip, grope, ground, grow, guard, guide, gyrate, hack, hail, halt, halve, hammer, handle, hang, harass, hasten, haul, head, help, hide, hijack, hire, hit, hitch, hoist, hold, hug, hurl, hurtle, hypothesize, identify, ignore, illustrate, imitate, implement, improve, improvise, increase, index, indict, individualize, induce, inflict, influence, inform, initiate, inject, injure, insert, inspect, inspire, install, instigate, instruct, integrate, intensify, interchange, interpret, interview, introduce, invade, invent, investigate, isolate, itemize, jab, jam, jar, jerk, jimmy, jingle, jolt, judge, jump, justify, keel, keynote, kibitz, kick, kidnap, kill, knife, land, lash, launch, lead, leap, learn, lecture, lessen, level, license, lick, link, listen, locate, log, lower, make, maim, maintain, manage, mangle, manipulate, manufacture, mark, market, massage, master, maul, measure, mediate, meet, mend, mentor, mimic, minimize, mobilize, mock, model, molest, monitor, motivate, mourn, move, mumble, murder, muster, mutilate, nab, nag, nail, narrow, needle, negotiate, nick, nip, nominate, nurture, observe, obtain, occupy, offer, operate, order, organize, originate, outline, overcome, oversee, pack, paddle, page, panic, park, parry, pass, pat, patrol, pause, paw, peel, penetrate, perceive, perfect, perform, persuade, photograph, pick, picket, pile, pilot, pin, pinch, pioneer, pirate, pitch, place, plan, play, plow, plunge, pocket, poke, polish, pose, position, pounce, predict, prepare, prescribe, present, print, prioritize, probe, process, procure, prod, produce, program, project, promote, prompt, proofread, propel, propose, protect, prove, provide, provoke, publicize, publish, pull, pump, punch, purchase, purge, pursue, push, qualify, question, quicken, quit, quiz, race, raid, raise, ram, ransack, rate, rattle, ravage, read, realize, rebuild, receive, recommend, reconcile, record, recoup, recruit, redeem, reduce, refer, regain, regulate, reinforce, rejoin, relate, relax, relieve, remove, render, renew, renovate, reorganize, repair, repel, report, represent, repulse, research, resign, resist, resolve, respond, restore, retain, retaliate, retreat, retrieve, reveal, review, revise, ride, rip, risk, rob, rock, roll, rub, rush, salute, satisfy, save, saw, scale, scan, scare, scatter, scavenge, schedule, scold, scoop, score, scour, scout, scrape, scream, screen, screw, scrub, scruff, scuffle, sculpt, seal, search, secure, seduce, segment, seize, select, sell, sense, serve, service, set, sever, sew, shake, shanghai, shape, share, sharpen, shave, shear, shell, shield, shift, shock, shoot, shorten, shout, shove, shovel, show, shun, sidestep, signal, simplify, sip, skim, skip, skirt, slacken, slam, slap, slash, slay, slide, smack, smear, smell, smuggle, snap, snatch, sniff, snuggle, soak, soil, solve, sort, spear, spin, splice, split, spot, spread, stack, stamp, start, startle, steal, steer, stiffen, stifle, stimulate, stock, stomp, stop, strangle, strap, streamline, strengthen, stress, strike, strip, stroke, stub, study, stuff, stun, subdue, submerge, submit, suck, summarize, summon, supervise, support, surrender, survey, suspend, sustain, swagger, swallow, swap, swing, swipe, switch, synergize, synthesize, systematize, tabulate, tackle, take, tap, target, taste, taunt, teach, tear, tease, terrorize, test, thrash, thread, threaten, throw, tickle, tie, tighten, tilt, tip, toss, touch, tout, track, train, transcribe, transfer, transform, translate, transport, trap, tread, treat, trim, trip, triple, tuck, tug, tumble, turn, tutor, twist, type, uncover, understand, undertake, undo, undress, unfold, unify, unite, unravel, untangle, unwind, update, usher, utilize, vacate, validate, value, vanquish, vault, vent, verbalize, verify, violate, ward, watch, wave, weigh, whack, whip, whirl, whistle, widen, wield, wiggle, withdraw, work, wreck, wrench, wrestle, write, yank, yell, yelp, yield, zap, zip]
    process: [catalog, initialize, consolidate]
    prefix: [pre-, post-, sub-,]
    synonym:
      perform: [perform, execute, apply]
      supply: [supply, specify, set, define, provide]
      will: [can, must, should, could, will]
      verify: [control, verify, check]

  noun:
    git: [archive, area, base, branch, change, commit, file, head, history, index, log, object, origin, pack, path, ref, remote, stage, stash, submodule, subtree, tag, tip, tree, upstream]
    location: '[non-{verb.git verb.tense.past} ][applied|downstream|local|remote|staged|unstaged|upstream]'
    synonym:
      failure: [failure, error]
      option: [option, argument, flag]
      command: [command, executable, action]

  adjective:
    git-action: [automatic, passive, temporary, staged]
    relevant: [relevant, applicable, appropriate, significant]
    synonym:
      possible:
        - 'possible'
        - 'a [{synonym.small-chance} ]likelihood'
        - 'a [{synonym.small-chance} ]chance'

  adverb:
    synonym:
      immediately: 
        - immediately
        - text: '{preposition.time} {verb.prefix}{verb.process verb.tense.present-participle}'
          weight: 10
      previously: [previously, earlier, formerly, once]
      sometimes: [when appropriate, 'in {determiner} cases']
      cleanly: '[un][cleanly|successfully]'

  synonym:
    small-chance: certain

  conjunction:
    and-or: [and, or, and/or]
    conditional: [if, when, whenever, provided that]
    conclusion: [as, because, and, but, so]

  preposition:
    position: [before, below, for, from, inside, next to, opposite of, outside, over, to]
    time: [during, after, prior to, before]
  # TODO add prefixes like pre-prepended, all prepended, etc.
  determiner: [prepended, post-prepended, all, catalogued, exported, pre-exported, cherry-picked, pre-initialized, the, the most recent]
  subject: 
    - text: the user
      weight: 5
    - 'the {command-name} command'

  current-command-name-raw: 'git-{$command-verb}-{$command-noun}'
  current-command-name: '<code>{current-command-name-raw}</code>'
  command-name-raw: 'git-{verb.common}-{noun.git}'
  command-name: '<code>{command-name-raw}</code>'
  command-option-raw: '--[{verb.common}-]{verb.common}-{noun.git}'
  command-option: '<code>{command-option-raw}</code>'
  command-action: >
    {$command-verb} {determiner} {noun.location} {$command-noun noun.plural}
    {preposition.position} {determiner} {verb.git verb.tense.past} {located-noun noun.plural}
  command-description: >
    {$command-verb verb.tense.present} {determiner} {noun.location}
    {$command-noun noun.plural} {preposition.position} {determiner} {verb.git verb.tense.past}
    {located-noun noun.plural}.

  git-path-raw: '{noun.git noun.plural}/{noun.git noun.plural}/'
  git-path: '<code>{git-path-raw}</code>'

  multiple-nouns: '{determiner} {verb.git verb.tense.past} {noun.git noun.plural}'
  located-noun: '[{noun.location} ]{noun.git}'
  constant-noun-prefix: [new, old, this, other, remote, local]
  constant-noun-constant: '{verb.common}_[{constant-noun-prefix}_]{noun.git}'
  constant-noun:
    - '<i>&lt;[{constant-noun-prefix}-|{verb.common}-]{noun.git}&gt;</i>'
    - '<code>{constant-noun-constant constantify}</code>'

  condition:
    - '{conjunction.conditional} {constant-noun} is [not ]{verb.git verb.tense.past}'
    - '{conjunction.conditional} {command-name} {verb.git verb.tense.present} {noun.git prepend-an}'
  conclusion:
    - '{conjunction.conclusion} {statement}'
  statement:
    - '{constant-noun} is {verb.git verb.tense.past} to {verb.git} the {noun.git} of {determiner} {noun.git noun.plural} {preposition.position} the {noun.git}'
    - '{current-command-name} {command-option} {verb.synonym.will} {verb.synonym.perform} {adjective.git-action prepend-an} {command-name} before [{verb.git verb.tense.present-participle} the {noun.git}|doing anything else]'
    - '{multiple-nouns} are {verb.git verb.tense.past} to {constant-noun} by {command-name}'
    - 'the same set of {noun.git noun.plural} would [{adverb.synonym.sometimes} ]be {verb.git verb.tense.past} to {adjective.git-action prepend-an} {noun.git}'
    - '{multiple-nouns} that were {adverb.synonym.previously} {verb.git verb.tense.past} {preposition.position} the {adjective.git-action} {noun.git noun.plural} are {verb.git verb.tense.past} to {adjective.git-action prepend-an} {noun.git}'
    - '{verb.git verb.tense.past prepend-an} {noun.synonym.failure} {verb.synonym.will} prevent {adjective.git-action} {verb.git verb.tense.present-participle} of {multiple-nouns}'
    - '{subject} {verb.synonym.will} {verb.git} {determiner} {noun.git noun.plural} {conjunction.and-or} run {command-name} {command-option} instead'
    - 'to {verb.git} {adjective.git-action prepend-an} {constant-noun} {conjunction.and-or} {verb.git} the working {noun.git noun.plural}, use the command {command-name} {command-option}'
    - 'the {noun.git} to be {verb.git verb.tense.past} can be {verb.synonym.supply verb.tense.past} in several ways'
    - 'the {command-option} {noun.synonym.option} can be used to {verb.git} {noun.git prepend-an} for the {noun.git} that is {verb.git verb.tense.past} by {adjective.git-action prepend-an} {noun.git}'
    - 'any {verb.git verb.tense.present-participle} of {noun.git prepend-an} that {verb.git verb.tense.present} {noun.git prepend-an} {adverb.synonym.immediately} after can be {verb.git verb.tense.past} with {command-name}'
    - 'after {verb.git verb.tense.present-participle} {noun.git noun.plural} to any {noun.git noun.plural}, {subject} can {verb.git} the {noun.git} of the {noun.git noun.plural}'
    - 'after {current-command-name prepend-an} ({verb.git verb.tense.past} by {command-name}[ {conjunction.and-or} {command-name}]) {verb.git verb.tense.present} {noun.git prepend-an}, {adverb.synonym.cleanly} {verb.git verb.tense.past} {noun.git noun.plural} are {verb.git verb.tense.past} for {subject}, and {noun.git noun.plural} that were {verb.git verb.tense.past} during {verb.git verb.tense.present-participle} are left in {verb.git verb.tense.past prepend-an} state'
    - '{multiple-nouns} {verb.git verb.tense.past} by {noun.git noun.plural} in the {located-noun}, but that [{adverb.synonym.sometimes} ]are [not ]in {constant-noun}, are {verb.git verb.tense.past} to {adjective.git-action prepend-an} {noun.git}'
    - '{current-command-name} takes {noun.synonym.option noun.plural} {adjective.relevant} to the {command-name} {noun.synonym.command} to {verb.synonym.verify} what is {verb.git verb.tense.past} and how'
  option-description:
    - '{verb.git} the {noun.git noun.plural} of {determiner} {noun.git noun.plural} that are {verb.git verb.tense.past}'
    - '{conjunction.conditional} this {noun.synonym.option} is {verb.synonym.supply verb.tense.past}, the {noun.git} prefixes {git-path} {conjunction.and-or} {git-path}'
    - 'the {noun.git} {verb.synonym.will} [not ]be {verb.common verb.tense.past} by {verb.git verb.tense.past prepend-an} {noun.git}'
    - 'use {noun.git} to {verb.git} {git-path} to {verb.git verb.tense.past prepend-an} {noun.git}'
    - 'with[out] this {noun.synonym.option}, {current-command-name} {command-option} {verb.git verb.tense.present} {noun.git noun.plural} that {verb.git} the {verb.synonym.supply verb.tense.past} {noun.git noun.plural}'
